rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Subscribers collection - only Cloud Functions can write
    match /subscribers/{subscriberId} {
      allow read: if false; // No client reads
      allow write: if false; // Only Cloud Functions can write
    }
    
    // Contact messages collection - only Cloud Functions can write
    match /contact_messages/{messageId} {
      allow read: if false;
      allow write: if false;
    }
    
    // Admin config - read only (password validation)
    match /config/{configId} {
      allow read: if true; // Anyone can read for password validation
      allow write: if false; // Only manual updates via Firebase Console
    }
    
    // Partners collection - public read, no client writes
    match /partners/{partnerId} {
      allow read: if true; // Public can view partners
      allow create, update, delete: if true; // Temporary for admin panel - TODO: add proper auth
    }
    
    // Default deny all other collections
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
